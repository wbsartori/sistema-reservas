{% extends 'layout.html' %}

{% block content %}
<div class="container-fluid">
    <div class="row mt-5">

        {% if equip %}
            {% for eq in equip %}
             <div class="col-md-3">
                <div class="card" style="width: 18rem;">
                  <div class="card-body">
                    <h5 class="card-title text-center">Equipamentos Reservados</h5>
                    <h2 class="card-subtitle mb-2 text-muted text-center">{{ eq.count_equip }}</h2>
                  </div>
                </div>
            </div>
            {% endfor %}
        {% endif %}
        {% if sala %}
            {% for sal in sala %}
             <div class="col-md-3">
                <div class="card" style="width: 18rem;">
                  <div class="card-body">
                    <h5 class="card-title text-center">Salas Reservadas</h5>
                    <h2 class="card-subtitle mb-2 text-muted text-center">{{ sal.count_sala }}</h2>
                  </div>
                </div>
            </div>
            {% endfor %}
        {% endif %}
        {% if veiculo %}
            {% for vei in veiculo %}
             <div class="col-md-3">
                <div class="card" style="width: 18rem;">
                  <div class="card-body">
                    <h5 class="card-title text-center">Veículos Reservados</h5>
                    <h2 class="card-subtitle mb-2 text-muted text-center">{{ vei.count_veiculo }}</h2>
                  </div>
                </div>
            </div>
            {% endfor %}
        {% endif %}
        {% if multiplo %}
            {% for mult in multiplo %}
             <div class="col-md-3">
                <div class="card" style="width: 18rem;">
                  <div class="card-body">
                    <h5 class="card-title text-center">Multiplas Reservas</h5>
                    <h2 class="card-subtitle mb-2 text-muted text-center">{{ mult.count_multiplo }}</h2>
                  </div>
                </div>
            </div>
            {% endfor %}
        {% endif %}

    </div>

    <hr>

    <div class="container-fluid">

        <div class="row mt-5">
             <table class="table table-striped">
              <thead>
                <tr>
                    <th scope="col">Nome</th>
                    <th scope="col">Usuário</th>
                    <th scope="col">Tipo</th>
                    <th scope="col">Horário</th>
                    <th scope="col">Data Inicio</th>
                    <th scope="col">Data Final</th>
                    <th scope="col"></th>
                    <th scope="col"></th>
                    <th scope="col"></th>
                </tr>
              </thead>
              <tbody>

              {% for reserva in reservas %}
                <tr>
                    <td>{{reserva.nome}}</td>
                    <td>{{reserva.usuario}}</td>
                    <td>{{reserva.descricao_tipo_reserva}}</td>
                    <td>{{reserva.horario}}</td>
                    <td>{{reserva.data_inicio}}</td>
                    <td>{{reserva.data_final}}</td>

                    <td scope="col">
                        <button class="btn btn-padrao-reservas" data-toggle="modal" data-target="#exampleModal{{reserva.id}}">Visualizar</button>
                        <!-- Modal -->
                        <div class="modal fade" id="exampleModal{{reserva.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                          <div class="modal-dialog" role="document">
                            <div class="modal-content">
                              <div class="modal-header">

                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                                </button>
                              </div>
                              <div class="modal-body">
                                <div class="row mt-5">
                                     <div class="col-md-12">
                                     <form>
                                         <h5 class="modal-title" id="exampleModalLabel">Detalhes da Reserva</h5>
                                        <hr class="bg-dark">
                                         <div class="row">
                                             <div class="col-md-6">
                                                 <div class="row">
                                                     <div class="col-md-6">
                                                         <div class="form-group">
                                                             <label for="">Usuário</label>
                                                             <input type="text" class="form-control" value="{{ usuario.username }}" disabled>
                                                        </div>
                                                     </div>
                                                     <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="">Data Inicio</label>
                                                             <input type="text" class="form-control" value="{{ reserva.data_inicio}}" disabled>
                                                        </div>
                                                     </div>
                                                 </div>
                                             </div>
                                              <div class="col-md-6">
                                                 <div class="row">
                                                     <div class="col-md-6">
                                                         <div class="form-group">
                                                             <label for="">Data Final</label>
                                                             <input type="text" class="form-control" value="{{ reserva.data_final }}" disabled>
                                                        </div>
                                                     </div>
                                                    <div class="col-md-6">
                                                         <div class="form-group">
                                                             <label for="">Horário</label>
                                                             <input type="text" class="form-control" value="{{ reserva.id_horario }}" disabled>
                                                        </div>
                                                     </div>
                                                 </div>
                                             </div>
                                         </div>
                                         <hr>
                                         <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="">Equipamento</label>
                                                    <input type="text" class="form-control" value="{{ reserva.id_equipamento }}" disabled>
                                                </div>
                                                 <div class="form-group">
                                                     <label for="">Sala</label>
                                                     <input type="text" class="form-control" value="{{ reserva.id_sala }}" disabled>
                                                </div>
                                                 <div class="form-group">
                                                     <label for="">Veículo</label>
                                                     <input type="text" class="form-control" value="{{ reserva.id_veiculo }}" disabled>
                                                </div>
                                            </div>
                                             <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="">Observacoes</label>
                                                    <textarea class="form-control" rows="5" cols="5" disabled>{{ reserva.observacoes }}</textarea>
                                                </div>
                                            </div>
                                         </div>
                                     </form>
                                     </div>
                                 </div>
                              </div>
                              <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                              </div>
                            </div>
                          </div>
                        </div>
                    </td>
                    <td class="text-center"><button class="btn btn-warning-reservas"><span class="mr-2"><i class="bi bi-alarm"></i></span>00:00:00</button></td>
                </tr>
              {% endfor %}
              </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}